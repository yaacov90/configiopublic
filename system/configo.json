{"deployments":[],"treeNodes":[{"name":"root","type":"group","subtype":"root","grouptype":"root","parentid":0,"myid":999,"children":[{"name":"projects","type":"group","grouptype":"filter","subtype":"projects","parentid":999,"myid":123,"children":[{"grouptype":"filter","valuetype":"name_is_value","name":"CONFIGIUS","type":"single","subtype":"projects","value":"CONFIGIUS","parentid":123,"myid":0.30660646607465214,"parentName":"projects"}]},{"name":"components","type":"group","subtype":"components","grouptype":"filter","parentid":999,"myid":456,"children":[{"grouptype":"filter","valuetype":"name_is_value","name":"FRONTEND","type":"single","subtype":"components","value":"FRONTEND","parentid":456,"myid":0.5313241050609572,"parentName":"components"},{"grouptype":"filter","valuetype":"name_is_value","name":"BACKEND","type":"single","subtype":"components","value":"BACKEND","parentid":456,"myid":0.08261803223214481,"parentName":"components"}]},{"name":"environments","type":"group","subtype":"environments","grouptype":"filter","parentid":999,"myid":111,"children":[{"grouptype":"filter","valuetype":"name_is_value","name":"TEST2","type":"single","subtype":"environments","value":"TEST2","parentid":111,"myid":0.5353415708599183,"parentName":"environments"},{"grouptype":"filter","valuetype":"name_is_value","name":"DEV1","type":"single","subtype":"environments","parentid":111,"myid":0.9232751099633918,"value":"DEV1"},{"grouptype":"filter","valuetype":"name_is_value","name":"TEST1","type":"single","subtype":"environments","value":"TEST1","parentid":111,"myid":0.1719205948423559,"parentName":"environments"},{"grouptype":"filter","children":[{"grouptype":"filter","valuetype":"name_is_value","name":"DEV1","type":"single","subtype":"environments","parentid":111,"myid":0.9232751099633918,"value":"DEV1"}],"name":"dev","type":"group","subtype":"environments","parentid":111,"myid":0.4084326005486836},{"grouptype":"filter","children":[{"grouptype":"filter","valuetype":"name_is_value","name":"TEST1","type":"single","subtype":"environments","value":"TEST1","parentid":111,"myid":0.1719205948423559,"parentName":"environments"},{"grouptype":"filter","valuetype":"name_is_value","name":"TEST2","type":"single","subtype":"environments","value":"TEST2","parentid":111,"myid":0.5353415708599183}],"name":"test","type":"group","subtype":"environments","parentid":111,"myid":0.7101469960871145}]},{"name":"params","type":"group","subtype":"params","grouptype":"param","parentid":999,"myid":222,"children":[{"grouptype":"param","valuetype":"later","name":"ENV_GIT_REPONAME","type":"single","subtype":"params","value":"git@github.com:yaacov90/configius_test1.git","parentid":222,"myid":0.8263169252069942,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_LOG_ACTIVE_SINCE_MINUTES","type":"single","subtype":"params","value":"100","parentid":222,"myid":0.6184907077915354,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"GIT_WORK_DIR","type":"single","subtype":"params","value":"/home/cius/action_work_dir/TEST1","parentid":222,"myid":0.5879489380347553,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_ID","type":"single","subtype":"params","value":"2","parentid":222,"myid":0.16420916896304294,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_TYPE","type":"single","subtype":"params","value":"TEST","parentid":222,"myid":0.7270576245268696,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_NAME","type":"single","subtype":"params","value":"TEST2","parentid":222,"myid":0.8784348392788401,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"CONFIGFE_IMAGE","type":"single","subtype":"params","value":"localhost:5000/configo_fe_035:registry","parentid":222,"myid":0.2803463335802452,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"KUBE_HOST","type":"single","subtype":"params","value":"161.97.143.5","parentid":222,"myid":0.09920067295341473,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"CONFIGBE_IMAGE","type":"single","subtype":"params","value":"localhost:5000/configo_be_028:registry","parentid":222,"myid":0.7764785493181117,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_LOG_ACTIVE_SINCE_MINUTES","type":"single","subtype":"params","value":"100","parentid":222,"myid":0.7845862845627791},{"grouptype":"param","valuetype":"later","name":"CONFIGFE_PORT","type":"single","subtype":"params","value":"24200","parentid":222,"myid":0.6789386103464252,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"CONFIGBE_PORT","type":"single","subtype":"params","value":"23200","parentid":222,"myid":0.18085504248919926,"parentName":"params"}]},{"name":"templates","type":"group","subtype":"templates","grouptype":"template","parentid":999,"myid":333,"children":[{"grouptype":"template","valuetype":"file","name":"docker-compose.yml","type":"single","subtype":"templates","value":"version: '3.5'\nservices:\n  configiusfe:\n    image: configius_fe\n    container_name: configius_fe\n    ports: \n      - \"{{ CONFIGIUSFE_PORT }}:80\"\n  configiusbe:\n    image: configius_be\n    container_name: configius_be\n    ports:\n      - \"{{ CONFIGIUSBE_PORT }}:3000\"\n    environment:\n      ENV_LOG_ACTIVE_SINCE_MINUTES: {{ ENV_LOG_ACTIVE_SINCE_MINUTES }}\n      ENV_GIT_WORK_DIR: /tmp/git\n      ENV_GIT_REPONAME: {{ ENV_GIT_REPONAME }}\n      ENV_GIT_KEY_DIR: /tmp/git\n      ENV_GIT_KEY_FILE_NAME: git_key_file\n      GIT_SSH_COMMAND: ssh -i /tmp/git/git_key_file -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no\n    volumes:\n      - git_work_dir:/tmp/git\nvolumes:\n  git_work_dir:\n    driver: local\n    driver_opts:\n      type: none\n      device: {{ GIT_WORK_DIR }}\n      o: bind\n\n\n","parentid":333,"myid":0.3531505035911755,"parentName":"templates"},{"grouptype":"template","valuetype":"file","name":"configius_kube_deployment.yaml","type":"single","subtype":"templates","value":"apiVersion: v1\nkind: Namespace\nmetadata:\n  labels:\n    app: configius-TEST1\n  name: configius-TEST1\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: configius-fe\n  namespace: configius-TEST1\n  name: configius-fe\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: configius-fe\n  template:\n    metadata:\n      annotations:\n      labels:\n        app: configius-fe\n    spec:\n      containers:\n      - name: configius-fe\n        image: localhost:5000/configo_fe_035:registry\n        command: ['sh', '-c', 'echo -e \"{\\n  \\\"CONFIGO_BE_HOST\\\":\\\"161.97.143.5\\\",\\n  \\\"CONFIGO_BE_PORT\\\":\\\"23100\\\"\\n}\" > /usr/local/apache2/htdocs/assets/env.txt && /usr/local/apache2/bin/apachectl start && chmod -R 755 /usr/local/apache2/htdocs && while :; do echo \".\"; sleep 5 ; done']\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: 80\n      restartPolicy: Always\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: configius-be\n  namespace: configius-TEST1\n  name: configius-be\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: configius-be\n  template:\n    metadata:\n      annotations:\n      labels:\n        app: configius-be\n    spec:\n      containers:\n      - name: configius-be\n        image: localhost:5000/configo_be_028:registry\n        imagePullPolicy: IfNotPresent\n        env:\n        - name: ENV_LOG_ACTIVE_SINCE_MINUTES\n          value: \"100\"\n        - name: ENV_GIT_WORK_DIR\n          value: \"/tmp\"\n        - name: ENV_GIT_REPONAME\n          value: \"git@github.com:yaacov90/configius_test1.git\"\n        - name: ENV_GIT_KEY_DIR\n          value: \"/tmp\"\n        - name: ENV_GIT_KEY_FILE_NAME\n          value: \"git_key_file\"\n        - name: GIT_SSH_COMMAND\n          value: \"ssh -i /tmp/git_key_file -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no\"\n        ports:\n        - containerPort: 3000\n      restartPolicy: Always\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: configius-fe\n  namespace: configius-TEST1\n  labels:\n    app: configius-fe\nspec:\n  ports:\n    - name: \"4200\"\n      port:  24100\n      targetPort: 80\n  type: LoadBalancer\n  externalIPs:\n    - 161.97.143.5\n  selector:\n    app: configius-fe\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: configius-be\n  namespace: configius-TEST1\n  labels:\n    app: configius-be\nspec:\n  ports:\n    - name: \"3000\"\n      port: 23100 \n      targetPort: 3000\n  type: LoadBalancer\n  externalIPs:\n    - 161.97.143.5\n  selector:\n    app: configius-be\n\n","parentid":333,"myid":0.4187201661113855,"parentName":"templates"},{"grouptype":"template","valuetype":"file","name":"shutdown.sh","type":"single","subtype":"templates","value":"kubectl delete -f configius_kube_deployment.yaml\n","parentid":333,"myid":0.01356356366925815,"parentName":"templates"},{"grouptype":"template","valuetype":"file","name":"startup.sh","type":"single","subtype":"templates","value":"kubectl apply -f configius_kube_deployment.yaml\n","parentid":333,"myid":0.9474350507706915,"parentName":"templates"},{"grouptype":"template","children":[],"name":"configius_templates","type":"group","subtype":"templates","parentid":333,"myid":0.8998152681900506}]},{"name":"connections","type":"group","subtype":"connections","grouptype":"connection","parentid":999,"myid":444,"children":[]},{"name":"actions","type":"group","subtype":"actions","grouptype":"action","parentid":999,"myid":112,"children":[]}]}],"chosenAndComposition":{"chosenElements":[],"compositionElements":[]}}