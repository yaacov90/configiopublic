[{"grouptype":"action","valuetype":"file","name":"CREATE","type":"single","subtype":"actions","value":"version_define=\"true\"\nif [ $# -eq 0 ]\nthen\n  version_define=\"false\"\nelif [ $# -eq 1 ]\nthen\n  version_fe=$1\n  version_be=$1\nelif [ $# -eq 2 ]\nthen\n  version_fe=$1\n  version_be=$2\nfi\n\nif [ \"${version_define}\" == \"true\" ]\nthen\n  image_fe=\"configo_fe_${version_fe}\"\n  image_be=\"configo_be_${version_be}\"\n\n  if [ ! -f \"${image_fe}\" ]\n  then\n    echo \" Image ${image_fe} not exist. So exit\"\n    exit -1\n  fi\n\n  if [ ! -f \"${image_be}\" ]\n  then\n    echo \" Image ${image_be} not exist. So exit\"\n    exit -1\n  fi\n\n  docker load -i ${image_fe}\n  docker load -i ${image_be}\nfi\n\n#cd ~/doccompv2\n./shutdown.sh\n\nif [ \"${version_define}\" == \"true\" ]\nthen\n  perl -pe \"s|image: configo_fe(.+)|image: ${image_fe}|\" -pi docker-compose.yml\n  perl -pe \"s|image: configo_be(.+)|image: ${image_be}|\" -pi docker-compose.yml\nfi\n\n./startup.sh\ndocker exec configo_fe /bin/sh -c \"perl -pe 's|\\\"CONFIGO_BE_HOST\\\":(.+)|\\\"CONFIGO_BE_HOST\\\":\\\"161.97.143.5\\\",|' -pi /usr/local/apache2/htdocs/assets/env.txt\"\ndocker exec configo_fe /bin/sh -c \"chmod -R 755 htdocs\"\n\njwt=`curl -s --location --request POST 'http://localhost:3000/auth/login' --header 'Content-Type: application/json' --data-raw '{\"username\": \"admin\",\"password\": \"admin\"}' | awk -F\"jwtticket\\\":\\\"\" '{print $2}' | sed 's|\\\"\\}$||'`\necho \" JWT ${jwt}\"\ncurl --location --request POST 'http://localhost:3000/git/key' --header 'jwtticket: '\"$jwt\"'' --header 'Content-Type: application/json' --data-raw '{\"key\": \"LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBb1NJSXFoekFuenJBTGpvbS8vRUp1NFFoRUluVGNEWCt2Ri82MlFxQ3lCVlZ5SFdqCnprc1BxMVVLYVFyNHRkNEFodmFWcXR0bXMrYWlJZnEwcDBBejB6K29FdnRDcy9iZXpFS3JDZ3liaktZMm5HYmoKZVRBeXF1MTNtVkxDbTNjUEJYR2QxVXJod3JQcS9QY0dtRGVaYzdhV2M2UjJvaHdTdytVa1I2Tkd4QkdsWEQvOApBQzU4d2pDczF4TUY1QXVDaUpEdUpSckJ4Ni9aQnE3U0g3NXMrd0hVVzFLVVVVd09xbXBJUVZLVlM1djJZUW1NCkVVWC9xeEZIN3R2TTJMNVJGellkWEtodnQwVHVrZVlOU0k5TlVBK2JrTUNqcy8zbElaUjZaSjVsZkJaV08wbWIKdkN6ajlKZ0JIc3UyWWhjMTVDbU5makdLYkZCbTVIczE5UVlPT1FJREFRQUJBb0lCQVFDZXJ5S3pUTitSc0UwaworVllCQmtMY2JYSVdsSFVxODdIcmwrWTFLcm5EQytmUUk3SnU3ZEwvbXg5R2RXeWJ4b2JrWXlEZ0EzUHdSWGgwCldDN2k2MEplanprWmdHS2ZVc2IxaDg1amRpa1Y2WGFzcmxMa3ZVZVl0NFhwOCt2OUtOSWRQVmYvZnVBNFcvRlcKc0h2SkdqQkFHWmV2U1U4ZnROL3lGYzZWMGtGVndxN1JvdFA0WkJIcVVPMDVTOEt5SUZJSXNjb0F2aXFydERibApmZHlmeHlKV2ZZUkZyRkMxS3FjWEIwQ2FLejVMbXU4dEthV20xQ0pOaEpsSGtBNUk1UEJBdSsxNXJOTnZIMThkCmFVVGF0cE5SM3lsTjNYM2NzV0VNMkV4ZFlnWjRSZ1RhVVMrTmNZNllaQVJrMUkrQnpaRWxKZUprbElBc1FkZnkKOG5GYTUzWlJBb0dCQU5EelJITWtIZGNVK25qOHZ4TTVBb2hNK2s4dG1lekZsNDhHV2Z3NWZyY2FuWnIwT0tvdwp0K1J3Q0g2QzNySU1LVXFSb0hXdlR5RGRpTVp5cG5aSnhTWTlURVJkaVdDV2UvYVVCRUtsMjZCeXMwbDNxcFk5Cng2dkhYSzJ6MEJDSlVpUGhFWVhwU1c5ampjNC9CYmUweGVJZG92TUNWYjZtVHRUNDFmbFBiN2FsQW9HQkFNVnEKWWxYUGJvRXE3UG16RkdxLzN2R3phWVQ0OEQyYnhyaGRsSUpEaW8ybmJ2MThCcWZrcWU2UzEwS3lJeTBVa01VRApSTktlR3RWemlNM1kyQTBob2ZmSXdmemM2OVRwa1kxZHJMb2ZpbldqUXdhYnByb0t6SCt2VzF5ejI4NTN4N0hTClVkZ1NQcGZBMm14bWc3M1U2eXZHVnRsVnJZRVpBU1VQd0MwTW5ma0ZBb0dCQU1RU296YlF1MWVyRGVjZWRVYmEKaG0vVW5FWlVhazV1bEd2WDcvVHBGdWxIaG9Gemp3RFZPcHFZTHNCWW1oVEZxTEdhdWRIMU1mR0xNTi9Ya2pFSgp4SUMvb0tPK2lqMGl1U3lIZFAvOWwzeVdaWHNaV2ZBbUJRcEN4OHNRSXJ5QnY1eC9oT3YrSDdUdzNJNmZRUVJFCkZEUzh6cjN1Z1B1b0grMWxtNVNaWUNFcEFvR0FXY2x6NWhGTThpU0MyV0tRZzZpMmpubUtJWGRUVk1IMzFMeUQKSWVmMEtVOGdsTnVHNzI5NXRrOUU1a204NC9ENWt4RlVpUEp0dyswaktIUmFkMFozc3dtMDZQdlZxdVY4Vks1cApNOUhLbUl4am5LcklYczh3aVZaSkdGV1pRRU9NS0owK3FpWktINTBQK3NONVlhcG9OMldpOUlBYVJLQUp2RUI0CnFFU1h5TDBDZ1lBQ1Z3U2dXT2VxSnN4bW5QNU1mZ1RKR2RubjU5V3NNU2JMeEV0dGVJKzlEa1JrSGVTaFlQbVQKYk5mZ1FZRC9LN0k0RTZKeUNJU2ZWaTN4OFBsSWU1RmxWa0tLVEdhbUdJUWplWlJsQlN3Si91ZDl4T2ZBUEJkKwplTVYrWGZ0WUdvOWNGWmZjeCswMmdMZUJ0N3hFejU3LzVYSXBmWElNanMwVGRBQ0dHMHhmZEE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=\"}'\n\n#docker exec configo_be /bin/sh -c \"apk add git openssh\"\n\n","parentid":112,"myid":0.572018186530048,"parentName":"actions"},{"grouptype":"param","valuetype":"later","name":"ENV_TYPE","type":"single","subtype":"params","value":"TEST","parentid":222,"myid":0.7270576245268696,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_ID","type":"single","subtype":"params","value":"1","parentid":222,"myid":0.16420916896304294,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_NAME","type":"single","subtype":"params","value":"TEST1","parentid":222,"myid":0.8784348392788401,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"GIT_WORK_DIR","type":"single","subtype":"params","value":"/home/cius/action_work_dir/TEST1","parentid":222,"myid":0.5879489380347553,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"CONFIGIUSBE_PORT","type":"single","subtype":"params","value":"3200","parentid":222,"myid":0.18085504248919926,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"CONFIGIUSFE_PORT","type":"single","subtype":"params","value":"4500","parentid":222,"myid":0.6789386103464252,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_LOG_ACTIVE_SINCE_MINUTES","type":"single","subtype":"params","value":"100","parentid":222,"myid":0.6184907077915354,"parentName":"params"},{"grouptype":"param","valuetype":"later","name":"ENV_GIT_REPONAME","type":"single","subtype":"params","value":"git@github.com:yaacov90/configius_test1.git","parentid":222,"myid":0.8263169252069942,"parentName":"params"},{"grouptype":"filter","valuetype":"name_is_value","name":"TEST1","type":"single","subtype":"environments","value":"TEST1","parentid":111,"myid":0.1719205948423559,"parentName":"environments"},{"grouptype":"filter","valuetype":"name_is_value","name":"CONFIGIUS","type":"single","subtype":"projects","value":"CONFIGIUS","parentid":123,"myid":0.30660646607465214,"parentName":"projects"},{"grouptype":"filter","valuetype":"name_is_value","name":"FRONTEND","type":"single","subtype":"components","value":"FRONTEND","parentid":456,"myid":0.5313241050609572,"parentName":"components"}]